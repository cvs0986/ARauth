server:
  port: 8080
  host: "0.0.0.0"
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 120s

database:
  host: "localhost"
  port: 5432
  name: "iam"
  user: "iam_user"
  password: "${DATABASE_PASSWORD}"
  max_open_conns: 25
  max_idle_conns: 5
  conn_max_lifetime: 5m
  ssl_mode: "disable"

redis:
  host: "localhost"
  port: 6379
  password: "${REDIS_PASSWORD}"
  db: 0
  pool_size: 10
  min_idle_conns: 5

hydra:
  admin_url: "http://localhost:4445"
  public_url: "http://localhost:4444"
  timeout: 10s

security:
  encryption_key: "01234567890123456789012345678901" # 32 bytes - MUST be changed in production!
  totp_issuer: "Nuage Identity"
  jwt:
    issuer: "https://iam.example.com"
    access_token_ttl: 15m
    refresh_token_ttl: 30d
    id_token_ttl: 1h
    signing_key_path: ""
    secret: "${JWT_SECRET}"
  password:
    min_length: 12
    require_uppercase: true
    require_lowercase: true
    require_number: true
    require_special: true
  mfa:
    issuer: "Nuage Identity"
    period: 30
    digits: 6
  rate_limit:
    login_attempts: 5
    login_window: 1m
    mfa_attempts: 5
    mfa_window: 5m
    api_requests: 100
    api_window: 1m

logging:
  level: "info"
  format: "json"
  output: "stdout"
  file_path: "/var/log/iam/api.log"
  max_size: 100
  max_backups: 5
  max_age: 30

metrics:
  enabled: true
  path: "/metrics"
  port: 9090

