apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "arauth-identity.fullname" . }}-config
  labels:
    {{- include "arauth-identity.labels" . | nindent 4 }}
data:
  config.yaml: |
    server:
      host: {{ .Values.server.host | quote }}
      port: {{ .Values.server.port }}
      read_timeout: {{ .Values.server.readTimeout | quote }}
      write_timeout: {{ .Values.server.writeTimeout | quote }}
    
    database:
      host: {{ .Values.database.host | quote }}
      port: {{ .Values.database.port }}
      user: {{ .Values.database.user | quote }}
      name: {{ .Values.database.name | quote }}
      sslmode: {{ .Values.database.sslmode | quote }}
      max_open_conns: {{ .Values.database.maxOpenConns }}
      max_idle_conns: {{ .Values.database.maxIdleConns }}
      conn_max_lifetime: {{ .Values.database.connMaxLifetime | quote }}
    
    redis:
      host: {{ .Values.redis.host | quote }}
      port: {{ .Values.redis.port }}
      password: {{ .Values.redis.password | quote }}
      db: {{ .Values.redis.db }}
    
    hydra:
      admin_url: {{ .Values.hydra.adminURL | quote }}
    
    logging:
      level: {{ .Values.logging.level | quote }}
      format: {{ .Values.logging.format | quote }}
      output: {{ .Values.logging.output | quote }}
    
    security:
      encryption_key: "CHANGE_ME_IN_PRODUCTION_32_BYTES_KEY"
      totp_issuer: {{ .Values.security.totpIssuer | quote }}

